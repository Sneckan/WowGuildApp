@model Signup
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

@{
    ViewData["Title"] = "_SignupPartial";
}



<div class="list-group-item" @if (SignInManager.IsSignedIn(User) && UserManager.GetUserId(User) == Model.UserId) { <text> data-toggle="modal" data-target="#signup-@Model.Id" </text> } style="color:black;">
    <div>
        @{
            var imgSrc = "http://render-eu.worldofwarcraft.com/character/" + Model.Character.Thumbnail;
        }
        <img src="@imgSrc" />
        @Model.Character.Name

        @if (Model.Note != null)
        {
            <p>
                Note: @Model.Note
            </p>
        }
    </div>
</div>

@if (SignInManager.IsSignedIn(User) && UserManager.GetUserId(User) == Model.UserId)
{
    <div class="modal fade" id="signup-@Model.Id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">@Model.User.UserName Note</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form asp-action="SignupNote" class="signup-note-form" method="post" id="signup-note-@Model.Id">
                        <textarea asp-for="Note" class="form-control"></textarea>
                        <input asp-for="EventId" type="hidden" value="@Model.EventId" />
                        <input asp-for="UserId" type="hidden" value="@Model.UserId" />
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input type="submit" form="signup-note-@Model.Id" class="btn btn-primary" value="Add Note" />
                </div>
            </div>
        </div>
    </div>

}
